<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:s="http://jboss.org/seam/faces"
	xmlns:c="http://java.sun.com/jsp/jstl/core">

<f:view contentType="text/html" encoding="ISO-8859-1">
	<h:head>
		<ui:fragment rendered="#{identity.loggedIn}">		
			<script>
				location.href='#{request.contextPath}/home';
			</script>
		</ui:fragment>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport"
			content="width=device-width, initial-scale=1, shrink-to-fit=no" />
		<meta name="description" content="ITM - iTrix Internet Manager" />
		<meta name="author" content="iTrix" />
		<meta name="keyword"
			content="Internet manager" />
		<link rel="shortcut icon" href="img/favicon.png" />
		<title>ITM</title>
		 <link href="http://getbootstrap.com/dist/css/bootstrap.min.css" rel="stylesheet" />
		
		<h:outputStylesheet name="template/css/font-awesome.min.css" />
		<h:outputStylesheet name="template/css/simple-line-icons.css" />
		<h:outputStylesheet name="template/css/style.css" />
	</h:head>

	<h:body styleClass="app flex-row align-items-center">
		<div class="container">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card-group mb-0">
                    <div class="card p-2">
                        <div class="card-block">
                        	<h:form method="POST" prependId="false">
	                            <h1>Login</h1>
	                            <p class="text-muted">Entre com suas informações</p>
	                            <div class="input-group mb-1">
	                                <span class="input-group-addon"><i class="icon-user"></i>
	                                </span>
									<h:inputText id="j_username"  styleClass="form-control" required="true" label="#{resources['label.global.username']}" value="admin">
										<f:passThroughAttribute name="placeholder" value="#{resources['label.global.username']}"  />
										<f:passThroughAttribute name="required" value="required"  />
									</h:inputText>
	                                
	                            </div>
	                            <div class="input-group mb-2">
	                                <span class="input-group-addon"><i class="icon-lock"></i>
	                                </span>
	                                
	                                <h:inputSecret id="j_password"  styleClass="form-control" required="true" label="#{resources['label.global.senha']}" value="itrixti@!" redisplay="true">
										<f:passThroughAttribute name="placeholder" value="#{resources['label.global.senha']}" />
										<f:passThroughAttribute name="required" value="required"  />
									</h:inputSecret>
									
	                            </div>
	                            <div class="row">
	                                <div class="col-6">
	                                   <h:commandButton id="login" value="#{resources['label.global.entrar']}" action="#{identity.login}" styleClass="btn btn-primary pull-right" />
	                                </div>
	                                <div class="col-6 text-right">
	                                    <button type="button" class="btn btn-link px-0">Esqueceu sua senha?</button>
	                                </div>
	                            </div>
	                         </h:form>   
                        </div>
                    </div>

	                    <div class="card card-inverse card-primary py-3">
	                        <div class="card-block text-center">
	                            <div>
	                                <h2>ITM</h2>
	                                <p>Itrix Internet Manager</p>
	                                 <h:form id="idFormPrimeiroAcesso">
	                                 		<h:messages showSummary="true" showDetail="false" infoClass="alert alert-success" errorClass="alert alert-danger" layout="list" style="width:96%"/>
			                                <ui:fragment rendered="#{loginController.loginTO.primeiroAcesso}" id="idPrimeiroAcesso">
			                                	<h:inputText id="idEmailPrimeiroAcesso" value="#{loginController.loginTO.cliente.email}" styleClass="form-control">
			                                		<f:ajax  event="blur" listener="#{loginController.recuperarCliente}" execute="@this" render="idFormPrimeiroAcesso"/>
			                                		<f:passThroughAttribute name="placeholder" value="#{resources['label.global.informeemail']}"  />
			                                	</h:inputText>
			                                	<br />
			                                	<h:inputSecret value="#{loginController.loginTO.cliente.senha}" rendered="#{loginController.loginTO.cliente.id ne null}" styleClass="form-control">
			                                		<f:passThroughAttribute name="placeholder" value="#{resources['label.global.informesenha']}"  />
			                                	</h:inputSecret>
			                                	<h:commandLink action="#{loginController.gravarCliente}" value="#{resources['label.global.gravar']}" styleClass="btn btn-primary active mt-1"  rendered="#{loginController.loginTO.cliente.id ne null}"/>
			                                </ui:fragment>
			                                <h:commandLink value="#{resources['label.global.primeiroacesso']}" styleClass="btn btn-primary active mt-1" rendered="#{!loginController.loginTO.primeiroAcesso}">
			                                	<f:setPropertyActionListener value="true" target="#{loginController.loginTO.primeiroAcesso}" />
			                                	<f:ajax render="idFormPrimeiroAcesso" />
			                                </h:commandLink>
	                                </h:form>
	                            </div>
	                        </div>
	                    </div>
                    
                </div>
            </div>
        </div>
    </div>
    	
		
		<h:outputScript name="template/js/libs/jquery.min.js" />
		<h:outputScript name="template/js/libs/bootstrap.min.js" />
		<h:outputScript name="template/js/app.js" />

	</h:body>

</f:view>
</html>
